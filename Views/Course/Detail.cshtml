@model Course

<h1>Thông tin khóa học</h1>
<ul>
    <li>Tên khóa học: @Model.CourseName</li>
    <li>Giá khóa học: @Model.Price$</li>
    <li>Ngày tạo: @Model.DateCreated</li>
    <li>@Html.Raw(Model.Description)</li>
</ul>
@foreach(var item in Model.chapters)
{
    <strong>@item.ChapterName  | <a asp-action="Create" asp-controller="Lesson" asp-route-chapterId="@item.Id">Tạo bài học</a>
        | <a asp-action="Edit" asp-controller="Chapter" asp-route-id="@item.Id">Sửa tên chương học</a>
        |    <a class="btn delete-btn delete-chapter" data-id="@item.Id">Xóa chương học này</a>
    </strong>
    <ul>
        @if(item.lessons!=null)
        {
            foreach(var lesson in item.lessons)
            {
                <li>@lesson.LessonName | <a asp-action="Delete" asp-controller="Lesson" asp-route-id="@lesson.Id">Xóa bài học</a>
                    | <a asp-action="Edit" asp-controller="Lesson" asp-route-id="@lesson.Id">Chỉnh sửa bài học</a>
                    | <a class="btn delete-btn delete-lesson" data-id="@lesson.Id">Xóa bài học</a>

                </li>
               @* <video ></video> *@
               <video controls width="600px" height="500px"> 
                    <source src="~/@lesson.FileLinkContent">
                </video>
            }
        }
    </ul>
}
<a asp-action="Create" asp-controller="Chapter" asp-route-courseId="@Model.Id" class="btn btn-warning">Thêm chương học</a>
<style>
    /* Style for modal */
    .modal {
        width: 350px;
        height: 150px;
        display: none; /* Ẩn modal mặc định */
        position: fixed;
        z-index: 1000;
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%);
        background-color: #fff;
        padding: 20px;
        border-radius: 5px;
        box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.5);
    }
    /* Style for overlay */
    .overlay {
        display: none; /* Ẩn overlay mặc định */
        position: fixed;
        z-index: 999;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5); /* Màu nền tối */
    }
</style>
<div class="overlay" id="overlay"></div> <!-- Overlay để tối màn hình -->

<div id="confirmDeleteModal" class="modal">
    <span class="close">&times;</span>
    <p>Bạn có chắc chắn muốn xóa không?</p>
    <button id="confirmDeleteBtn" class="btn btn-danger">Xóa</button>
</div>

@section Scripts {
    <script>
        // Lấy tất cả các nút xóa và gán sự kiện click cho mỗi nút
        var deleteButtons = document.querySelectorAll('.delete-lesson');
        deleteButtons.forEach(button => {
            button.addEventListener('click', function() {
                var lessonId = this.getAttribute('data-id');
                document.getElementById('confirmDeleteModal').style.display = 'block';
                document.getElementById('overlay').style.display = 'block'; // Hiển thị overlay
                
                // Xác nhận xóa khi người dùng nhấn nút "Xóa"
                document.getElementById('confirmDeleteBtn').addEventListener('click', function() {
                    window.location.href = '/Lesson/Delete/' + lessonId;
                });
                
                // Ẩn modal và overlay khi người dùng nhấn nút "Đóng"
                document.querySelector('.close').addEventListener('click', function() {
                    document.getElementById('confirmDeleteModal').style.display = 'none';
                    document.getElementById('overlay').style.display = 'none'; // Ẩn overlay
                });
            });
        });
    </script>

     <script>
        // Lấy tất cả các nút xóa và gán sự kiện click cho mỗi nút
        var deleteButtons = document.querySelectorAll('.delete-chapter');
        deleteButtons.forEach(button => {
            button.addEventListener('click', function() {
                var chapterId = this.getAttribute('data-id');
                document.getElementById('confirmDeleteModal').style.display = 'block';
                document.getElementById('overlay').style.display = 'block'; // Hiển thị overlay
                
                // Xác nhận xóa khi người dùng nhấn nút "Xóa"
                document.getElementById('confirmDeleteBtn').addEventListener('click', function() {
                    window.location.href = '/Chapter/Delete/' + chapterId;
                });
                
                // Ẩn modal và overlay khi người dùng nhấn nút "Đóng"
                document.querySelector('.close').addEventListener('click', function() {
                    document.getElementById('confirmDeleteModal').style.display = 'none';
                    document.getElementById('overlay').style.display = 'none'; // Ẩn overlay
                });
            });
        });
    </script>
}

